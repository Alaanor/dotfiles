<eww>
  <definitions>
    <def name="player">
      <box orientation="v" space-evenly="false">
        <box orientation="h" halign="center" space-evenly="false">
          <box class="music_cover" style="background-image: url('{{music_cover}}');">{{music_generate_cover}}</box>
          <box orientation="v" space-evenly="false">
            <label class="music_title" text="{{music_title}}" wrap="true" />
            <label class="music_artist" text="{{music_artist}}" wrap="true" />
          </box>
        </box>
      </box>
    </def>

    <def name="blur_full">
      <box orientation="v" space-evenly="true">
      </box>
    </def>

    <def name="crypto_btc">
      <box orientation="v" space-evenly="false">
        <box class="crypto_price">{{crypto_btc_price}}</box>
        <box class="crypto_text">XBT-CHF</box>
      </box>
    </def>

    <def name="crypto_eth">
      <box orientation="v" space-evenly="false">
        <box class="crypto_price">{{crypto_eth_price}}</box>
        <box class="crypto_text">ETH-CHF</box>
      </box>
    </def>
  
    <def name="crypto_ada">
      <box orientation="v" space-evenly="false">
        <box class="crypto_price">{{crypto_ada_price}}</box>
        <box class="crypto_text">ADA-CHF</box>
      </box>
    </def>

    <def name="date_time">
      <box orientation="v" space-evenly="false">
        <box class="date">{{time}}</box>
        <box class="time">{{date}}</box>
      </box>
    </def>

    <def name="volume">
      <box orientation="v" space-evenly="false">
        <label class="icon" text="" />
        <label text="{{current_volume}}%" />
      </box>
    </def>

    <def name="workspaces">
      <box orientation="h">
        <box orientation="v">
          <label class="screen-label" text=""/>
          <label class="w-{{workspace_1_visible}}" text="{{ if workspace_1_open == 1 then '' else '' }}"/>
          <label class="w-{{workspace_4_visible}}" text="{{ if workspace_4_open == 1 then '' else '' }}"/>
          <label class="w-{{workspace_7_visible}}" text="{{ if workspace_7_open == 1 then '' else '' }}"/>
        </box>
        <box orientation="v">
          <label class="screen-label" text=""/>
          <label class="w-{{workspace_2_visible}}" text="{{ if workspace_2_open == 1 then '' else '' }}"/>
          <label class="w-{{workspace_5_visible}}" text="{{ if workspace_5_open == 1 then '' else '' }}"/>
          <label class="w-{{workspace_8_visible}}" text="{{ if workspace_8_open == 1 then '' else '' }}"/>
        </box>
        <box orientation="v">
          <label class="screen-label" text=""/>
          <label class="w-{{workspace_3_visible}}" text="{{ if workspace_3_open == 1 then '' else '' }}"/>
          <label class="w-{{workspace_6_visible}}" text="{{ if workspace_6_open == 1 then '' else '' }}"/>
          <label class="w-{{workspace_9_visible}}" text="{{ if workspace_9_open == 1 then '' else '' }}"/>
        </box>
      </box>
    </def>

  </definitions>
  
  <variables>
    <script-var name="music_artist" interval="1s">playerctl metadata --format '{{ artist }}'</script-var>
    <script-var name="music_title" interval="1s">~/.config/eww/scripts/get_music_title</script-var>
    <script-var name="music_cover" interval="1s">~/.config/eww/scripts/get_music_cover</script-var>
    <script-var name="music_generate_cover" interval="1s">~/.config/eww/scripts/generate_music_cover</script-var>

    <script-var name="crypto_btc_price" interval="1m">curl -s chf.rate.sx/1btc | xargs printf "%.2f\n"</script-var>
    <script-var name="crypto_eth_price" interval="1m">curl -s chf.rate.sx/1eth | xargs printf "%.2f\n"</script-var>
    <script-var name="crypto_ada_price" interval="1m">curl -s chf.rate.sx/1ada | xargs printf "%.2f\n"</script-var>
    <script-var name="crypto_bnb_price" interval="1m">curl -s chf.rate.sx/1bnb | xargs printf "%.2f\n"</script-var>
    <script-var name="crypto_dot_price" interval="1m">curl -s chf.rate.sx/1dot | xargs printf "%.2f\n"</script-var>

    <script-var name="date" interval="1s">date "+%Y.%m.%d"</script-var>
    <script-var name="time" interval="1s">date "+%H:%M:%S"</script-var>

    <script-var name="current_volume" interval="1s">pamixer --get-volume</script-var>

    <script-var name="workspace_1_open" interval="1s">i3-workspace-list --num 1 | wc -l</script-var>
    <script-var name="workspace_2_open" interval="1s">i3-workspace-list --num 2 | wc -l</script-var>
    <script-var name="workspace_3_open" interval="1s">i3-workspace-list --num 3 | wc -l</script-var>
    <script-var name="workspace_4_open" interval="1s">i3-workspace-list --num 4 | wc -l</script-var>
    <script-var name="workspace_5_open" interval="1s">i3-workspace-list --num 5 | wc -l</script-var>
    <script-var name="workspace_6_open" interval="1s">i3-workspace-list --num 6 | wc -l</script-var>
    <script-var name="workspace_7_open" interval="1s">i3-workspace-list --num 7 | wc -l</script-var>
    <script-var name="workspace_8_open" interval="1s">i3-workspace-list --num 8 | wc -l</script-var>
    <script-var name="workspace_9_open" interval="1s">i3-workspace-list --num 9 | wc -l</script-var>

    <script-var name="workspace_1_visible" interval="1s">i3-workspace-list --num 1 --visible true | wc -l</script-var>
    <script-var name="workspace_2_visible" interval="1s">i3-workspace-list --num 2 --visible true | wc -l</script-var>
    <script-var name="workspace_3_visible" interval="1s">i3-workspace-list --num 3 --visible true | wc -l</script-var>
    <script-var name="workspace_4_visible" interval="1s">i3-workspace-list --num 4 --visible true | wc -l</script-var>
    <script-var name="workspace_5_visible" interval="1s">i3-workspace-list --num 5 --visible true | wc -l</script-var>
    <script-var name="workspace_6_visible" interval="1s">i3-workspace-list --num 6 --visible true | wc -l</script-var>
    <script-var name="workspace_7_visible" interval="1s">i3-workspace-list --num 7 --visible true | wc -l</script-var>
    <script-var name="workspace_8_visible" interval="1s">i3-workspace-list --num 8 --visible true | wc -l</script-var>
    <script-var name="workspace_9_visible" interval="1s">i3-workspace-list --num 9 --visible true | wc -l</script-var>
  </variables>

  <windows>
    <window name="player">
      <geometry x="1110" y="420" width="580" height="280"/>
      <widget>
        <player/>
      </widget>
    </window>

    <window name="blur_full">
      <geometry x="0" y="0" width="100%" height="100%"/>
      <widget>
        <blur_full/>
      </widget>
    </window>

    <window name="crypto_btc">
      <geometry x="810" y="420" width="280" height="130"/>
      <widget>
        <crypto_btc/>
      </widget>
    </window>

    <window name="crypto_eth">
      <geometry x="810" y="570" width="280" height="130"/>
      <widget>
        <crypto_eth/>
      </widget>
    </window>

    <window name="crypto_ada">
      <geometry x="810" y="720" width="280" height="130"/>
      <widget>
        <crypto_ada/>
      </widget>
    </window>

    <window name="date_time">
      <geometry x="1110" y="720" width="280" height="130"/>
      <widget>
        <date_time/>
      </widget>
    </window>

    <window name="volume">
      <geometry x="1410" y="720" width="130" height="130"/>
      <widget>
        <volume/>
      </widget>
    </window>

    <window name="workspaces">
      <geometry x="1710" y="420" width="280" height="280"/>
      <widget>
        <workspaces/>
      </widget>
    </window>

  </windows>
</eww>
